<!DOCTYPE html>
<html>
<head>
    <title>Ricerca con Vertex AI</title>
</head>
<body>

    <gen-search-widget
        configId="970d3e68-6b95-4327-9b77-ed2821fc5870"
        triggerId="searchWidgetTrigger">
    </gen-search-widget>

    <input placeholder="Cerca qui" id="searchWidgetTrigger" />

    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            const urlParams = new URLSearchParams(window.location.search);
            const query = urlParams.get('query');
            
            if (query) {
                // Simula il click sul campo per far apparire il widget
                const searchInput = document.getElementById('searchWidgetTrigger');
                if (searchInput) {
                    searchInput.click();
                }

                // Trova il widget e attendi che sia pronto
                const widget = document.querySelector('gen-search-widget');
                widget.addEventListener('widget-loaded', () => {
                    // Passa la query direttamente al metodo 'search' del widget
                    widget.search(query);
                });
            }
        });
    </script>
    
    <script src="https://cloud.google.com/ai/gen-app-builder/client?hl=it"></script>

</body>
</html>


